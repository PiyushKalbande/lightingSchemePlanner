<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Room Generator</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
</head>
<body style="margin: 0;">
    <input type="number" id="length" placeholder="Length">
    <input type="number" id="width" placeholder="Width">
    <input type="number" id="height" placeholder="Height">
    <button onclick="generateRoom()">Generate Room</button>

    <script>
        async function generateRoom() {
            const length = parseFloat(document.getElementById('length').value) || 5;
            const width = parseFloat(document.getElementById('width').value) || 5;
            const height = parseFloat(document.getElementById('height').value) || 5;
    
            const response = await fetch("http://127.0.0.1:5000/get-room-config", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ length, width, height })
            });
    
            const data = await response.json();
    
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer();
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);
    
            const materials = [
                new THREE.MeshBasicMaterial({ color: "red" }),
                new THREE.MeshBasicMaterial({ color: "green" }),
                new THREE.MeshBasicMaterial({ color: "blue" }),
                new THREE.MeshBasicMaterial({ color: "yellow" }),
                new THREE.MeshBasicMaterial({ color: "white" }),
                new THREE.MeshBasicMaterial({ color: "purple" }),
            ];
    
            const geometry = new THREE.BoxGeometry(data.length, data.height, data.width);
            const cube = new THREE.Mesh(geometry, materials);
            scene.add(cube);
    
            camera.position.z = 10;
            
            function animate() {
                requestAnimationFrame(animate);
                cube.rotation.y += 0.01;
                renderer.render(scene, camera);
            }
            animate();
        }
    </script>
    
</body>
</html>
